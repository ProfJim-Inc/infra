# =============================================================================
# ingress-nginx â€” system pool, exposes a Linode NodeBalancer (LoadBalancer)
# =============================================================================

controller:
  nodeSelector:
    pool: system

  # Linode provisions a NodeBalancer for LoadBalancer services
  service:
    type: LoadBalancer
    annotations:
      service.beta.kubernetes.io/linode-loadbalancer-throttle: "4"

  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi

  # Enable Prometheus metrics scraping
  metrics:
    enabled: true
    serviceMonitor:
      enabled: true
      namespace: monitoring

  # Single replica is fine for now; scale up after limit increase
  replicaCount: 1

  tolerations:
    - key: node.kubernetes.io/not-ready
      operator: Exists
      effect: NoExecute
      tolerationSeconds: 300
